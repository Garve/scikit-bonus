

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <title>skbonus.pandas.time package &mdash; scikit-bonus 2021 documentation</title>



  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />










  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->


      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>

    <script type="text/javascript" src="../_static/js/theme.js"></script>


    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="skbonus.preprocessing package" href="skbonus.preprocessing.html" />
    <link rel="prev" title="skbonus.pandas package" href="skbonus.pandas.html" />
</head>

<body class="wy-body-for-nav">


  <div class="wy-grid-for-nav">

    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >



            <a href="../index.html" class="icon icon-home"> scikit-bonus



          </a>







<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>


        </div>


        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">






              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../license.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="../linear-models.html">Linear Models</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">skbonus</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="skbonus.html">skbonus package</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="skbonus.html#subpackages">Subpackages</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="skbonus.linear_model.html">skbonus.linear_model package</a></li>
<li class="toctree-l4"><a class="reference internal" href="skbonus.meta.html">skbonus.meta package</a></li>
<li class="toctree-l4"><a class="reference internal" href="skbonus.metrics.html">skbonus.metrics package</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="skbonus.pandas.html">skbonus.pandas package</a></li>
<li class="toctree-l4"><a class="reference internal" href="skbonus.preprocessing.html">skbonus.preprocessing package</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="skbonus.html#module-skbonus">Module contents</a></li>
</ul>
</li>
</ul>
</li>
</ul>



        </div>

      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">


      <nav class="wy-nav-top" aria-label="top navigation">

          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">scikit-bonus</a>

      </nav>


      <div class="wy-nav-content">

        <div class="rst-content">



















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">

      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>

          <li><a href="modules.html">skbonus</a> &raquo;</li>

          <li><a href="skbonus.html">skbonus package</a> &raquo;</li>

          <li><a href="skbonus.pandas.html">skbonus.pandas package</a> &raquo;</li>

      <li>skbonus.pandas.time package</li>


      <li class="wy-breadcrumbs-aside">


            <a href="../_sources/api/skbonus.pandas.time.rst.txt" rel="nofollow"> View page source</a>


      </li>

  </ul>


  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">


<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="skbonus-pandas-time-package">
<h1>skbonus.pandas.time package<a class="headerlink" href="#skbonus-pandas-time-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="module-skbonus.pandas.time">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-skbonus.pandas.time" title="Permalink to this headline">¶</a></h2>
<p>Module for time series utilities with a focus on pandas compatibility.</p>
<dl class="py class">
<dt id="skbonus.pandas.time.DateIndicator">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">skbonus.pandas.time.</span></code><code class="sig-name descname"><span class="pre">DateIndicator</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dates</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skbonus.pandas.time.DateIndicator" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">sklearn.base.BaseEstimator</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">sklearn.base.TransformerMixin</span></code></p>
<p>Enrich a pandas dataframes with a new column indicating if there is a special date.</p>
<p>This new column will contain a one for each date specified in the <cite>dates</cite> keyword, zero otherwise.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>str</em>) – The name of the new column. Usually a holiday name such as Easter, Christmas, Black Friday, …</p></li>
<li><p><strong>dates</strong> (<em>List</em><em>[</em><em>str</em><em>]</em>) – A list containing the dates of the holiday. You have to state every holiday explicitly, i.e.
Christmas from 2018 to 2020 can be encoded as [“2018-12-24”, “2019-12-24”, “2020-12-24”].</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">&quot;A&quot;</span><span class="p">:</span> <span class="nb">range</span><span class="p">(</span><span class="mi">7</span><span class="p">)},</span> <span class="n">index</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="s2">&quot;2019-12-29&quot;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">7</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">DateIndicator</span><span class="p">(</span><span class="s2">&quot;around_new_year_2020&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;2019-12-31&quot;</span><span class="p">,</span> <span class="s2">&quot;2020-01-01&quot;</span><span class="p">,</span> <span class="s2">&quot;2020-01-02&quot;</span><span class="p">])</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<span class="go">            A  around_new_year_2020</span>
<span class="go">2019-12-29  0                     0</span>
<span class="go">2019-12-30  1                     0</span>
<span class="go">2019-12-31  2                     1</span>
<span class="go">2020-01-01  3                     1</span>
<span class="go">2020-01-02  4                     1</span>
<span class="go">2020-01-03  5                     0</span>
<span class="go">2020-01-04  6                     0</span>
</pre></div>
</div>
<dl class="py method">
<dt id="skbonus.pandas.time.DateIndicator.fit">
<code class="sig-name descname"><span class="pre">fit</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">X</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">pandas.core.frame.DataFrame</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">skbonus.pandas.time._simple.DateIndicator</span><a class="headerlink" href="#skbonus.pandas.time.DateIndicator.fit" title="Permalink to this definition">¶</a></dt>
<dd><p>Fit the estimator. In this special case, nothing is done.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>X</strong> (<em>Ignored</em>) – Not used, present here for API consistency by convention.</p></li>
<li><p><strong>y</strong> (<em>Ignored</em>) – Not used, present here for API consistency by convention.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Fitted transformer.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#skbonus.pandas.time.DateIndicator" title="skbonus.pandas.time.DateIndicator">DateIndicator</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="skbonus.pandas.time.DateIndicator.transform">
<code class="sig-name descname"><span class="pre">transform</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">X</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">pandas.core.frame.DataFrame</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">pandas.core.frame.DataFrame</span><a class="headerlink" href="#skbonus.pandas.time.DateIndicator.transform" title="Permalink to this definition">¶</a></dt>
<dd><p>Add the new date feature to the dataframe.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>X</strong> (<em>pd.DataFrame</em>) – A pandas dataframe with a DatetimeIndex.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The input dataframe with an additional boolean column named <cite>self.name</cite>.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pd.DataFrame</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="skbonus.pandas.time.ExponentialDecaySmoother">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">skbonus.pandas.time.</span></code><code class="sig-name descname"><span class="pre">ExponentialDecaySmoother</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">frequency</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">window</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">strength</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">float</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">0.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">peak</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">float</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">0.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exponent</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">float</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">1.0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skbonus.pandas.time.ExponentialDecaySmoother" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">skbonus.pandas.time._continuous.Smoother</span></code></p>
<p>Smooth the columns of a data frame by applying a convolution with a exponentially decaying curve.</p>
<p>This class can be used for modelling carry over effects in marketing mix models</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>frequency</strong> (<em>Optional</em><em>[</em><em>str</em><em>]</em><em>, </em><em>default=None</em>) – A pandas time frequency. Can take values like “d” for day or “m” for month. A full list can
be found on <a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/user_guide/timeseries.html#timeseries-offset-aliases">https://pandas.pydata.org/pandas-docs/stable/user_guide/timeseries.html#timeseries-offset-aliases</a>.
If None, the transformer tries to infer it during fit time.</p></li>
<li><p><strong>window</strong> (<em>int</em><em>, </em><em>default=1</em>) – Size of the sliding window. The effect of a holiday will reach from approximately
date - <cite>window/2 * frequency</cite> to date + <cite>window/2 * frequency</cite>, i.e. it is centered around the dates in <cite>dates</cite>.</p></li>
<li><p><strong>strength</strong> (<em>float</em><em>, </em><em>default=0.0</em>) – Fraction of the spending effect that is carried over.</p></li>
<li><p><strong>peak</strong> (<em>float</em><em>, </em><em>default=0.0</em>) – Where the carryover effect peaks.</p></li>
<li><p><strong>exponent</strong> (<em>float</em><em>, </em><em>default=1.0</em>) – To further widen or narrow the carryover curve. A value of 1.0 yields a normal exponential decay.
With values larger than 1.0, a super exponential decay can be achieved.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">&quot;A&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]},</span> <span class="n">index</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="s2">&quot;2019-12-29&quot;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">7</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ExponentialDecaySmoother</span><span class="p">()</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<span class="go">              A</span>
<span class="go">2019-12-29  0.0</span>
<span class="go">2019-12-30  0.0</span>
<span class="go">2019-12-31  0.0</span>
<span class="go">2020-01-01  1.0</span>
<span class="go">2020-01-02  0.0</span>
<span class="go">2020-01-03  0.0</span>
<span class="go">2020-01-04  0.0</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ExponentialDecaySmoother</span><span class="p">(</span><span class="n">frequency</span><span class="o">=</span><span class="s2">&quot;d&quot;</span><span class="p">,</span> <span class="n">window</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">strength</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<span class="go">                   A</span>
<span class="go">2019-12-29  0.000000</span>
<span class="go">2019-12-30  0.000000</span>
<span class="go">2019-12-31  0.000000</span>
<span class="go">2020-01-01  0.571429</span>
<span class="go">2020-01-02  0.285714</span>
<span class="go">2020-01-03  0.142857</span>
<span class="go">2020-01-04  0.000000</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ExponentialDecaySmoother</span><span class="p">(</span><span class="n">window</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">strength</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">peak</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<span class="go">               A</span>
<span class="go">2019-12-29  0.00</span>
<span class="go">2019-12-30  0.00</span>
<span class="go">2019-12-31  0.00</span>
<span class="go">2020-01-01  0.25</span>
<span class="go">2020-01-02  0.50</span>
<span class="go">2020-01-03  0.25</span>
<span class="go">2020-01-04  0.00</span>
</pre></div>
</div>
</dd></dl>

<dl class="py class">
<dt id="skbonus.pandas.time.GeneralGaussianSmoother">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">skbonus.pandas.time.</span></code><code class="sig-name descname"><span class="pre">GeneralGaussianSmoother</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">frequency</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">window</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">p</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">float</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sig</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">float</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tails</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">'both'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skbonus.pandas.time.GeneralGaussianSmoother" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">skbonus.pandas.time._continuous.Smoother</span></code></p>
<p>Smooth the columns of a data frame by applying a convolution with a generalized Gaussian curve.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>frequency</strong> (<em>Optional</em><em>[</em><em>str</em><em>]</em><em>, </em><em>default=None</em>) – A pandas time frequency. Can take values like “d” for day or “m” for month. A full list can
be found on <a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/user_guide/timeseries.html#timeseries-offset-aliases">https://pandas.pydata.org/pandas-docs/stable/user_guide/timeseries.html#timeseries-offset-aliases</a>.
If None, the transformer tries to infer it during fit time.</p></li>
<li><p><strong>window</strong> (<em>int</em><em>, </em><em>default=1</em>) – Size of the sliding window. The effect of a holiday will reach from approximately
date - <cite>window/2 * frequency</cite> to date + <cite>window/2 * frequency</cite>, i.e. it is centered around the dates in <cite>dates</cite>.</p></li>
<li><p><strong>p</strong> (<em>float</em><em>, </em><em>default=1</em>) – Parameter for the shape of the curve. p=1 yields a typical Gaussian curve while p=0.5 yields a Laplace curve, for example.</p></li>
<li><p><strong>sig</strong> (<em>float</em><em>, </em><em>default=1</em>) – Parameter for the standard deviation of the bell-shaped curve.</p></li>
<li><p><strong>tails</strong> (<em>str</em><em>, </em><em>default=&quot;both&quot;</em>) – <p>Which tails to use. Can be one of</p>
<blockquote>
<div><ul>
<li><p>”left”</p></li>
<li><p>”right”</p></li>
<li><p>”both”</p></li>
</ul>
</div></blockquote>
</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">&quot;A&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]},</span> <span class="n">index</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="s2">&quot;2019-12-29&quot;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">7</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">GeneralGaussianSmoother</span><span class="p">()</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<span class="go">              A</span>
<span class="go">2019-12-29  0.0</span>
<span class="go">2019-12-30  0.0</span>
<span class="go">2019-12-31  0.0</span>
<span class="go">2020-01-01  1.0</span>
<span class="go">2020-01-02  0.0</span>
<span class="go">2020-01-03  0.0</span>
<span class="go">2020-01-04  0.0</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">GeneralGaussianSmoother</span><span class="p">(</span><span class="n">frequency</span><span class="o">=</span><span class="s2">&quot;d&quot;</span><span class="p">,</span> <span class="n">window</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">p</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">sig</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<span class="go">                   A</span>
<span class="go">2019-12-29  0.000000</span>
<span class="go">2019-12-30  0.054489</span>
<span class="go">2019-12-31  0.244201</span>
<span class="go">2020-01-01  0.402620</span>
<span class="go">2020-01-02  0.244201</span>
<span class="go">2020-01-03  0.054489</span>
<span class="go">2020-01-04  0.000000</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">GeneralGaussianSmoother</span><span class="p">(</span><span class="n">window</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span> <span class="n">tails</span><span class="o">=</span><span class="s2">&quot;right&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<span class="go">                   A</span>
<span class="go">2019-12-29  0.000000</span>
<span class="go">2019-12-30  0.000000</span>
<span class="go">2019-12-31  0.000000</span>
<span class="go">2020-01-01  0.570459</span>
<span class="go">2020-01-02  0.346001</span>
<span class="go">2020-01-03  0.077203</span>
<span class="go">2020-01-04  0.006337</span>
</pre></div>
</div>
</dd></dl>

<dl class="py class">
<dt id="skbonus.pandas.time.PowerTrend">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">skbonus.pandas.time.</span></code><code class="sig-name descname"><span class="pre">PowerTrend</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">power</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">float</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">1.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">frequency</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">origin_date</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">pandas._libs.tslibs.timestamps.Timestamp</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skbonus.pandas.time.PowerTrend" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">skbonus.pandas.time._continuous.BaseContinuousTransformer</span></code></p>
<p>Add a power trend column to a pandas dataframe.</p>
<p>For example, it can create a new column with numbers increasing quadratically in the index.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>power</strong> (<em>float</em><em>, </em><em>default=1.0</em>) – Exponent to use for the trend, i.e. linear (power=1.), root (power=0.5), or cube (power=3.).</p></li>
<li><p><strong>frequency</strong> (<em>Optional</em><em>[</em><em>str</em><em>]</em><em>, </em><em>default=None</em>) – A pandas time frequency. Can take values like “d” for day or “m” for month. A full list can
be found on <a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/user_guide/timeseries.html#timeseries-offset-aliases">https://pandas.pydata.org/pandas-docs/stable/user_guide/timeseries.html#timeseries-offset-aliases</a>.
If None, the transformer tries to infer it during fit time.</p></li>
<li><p><strong>origin_date</strong> (<em>Optional</em><em>[</em><em>Union</em><em>[</em><em>str</em><em>, </em><em>pd.Timestamp</em><em>]</em><em>]</em><em>, </em><em>default=None</em>) – A date the trend originates from, i.e. the value of the trend column is zero for this date.
If None, the transformer uses the smallest date of the training set during fit time.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
<span class="gp">... </span>    <span class="p">{</span><span class="s2">&quot;A&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">,</span> <span class="s2">&quot;d&quot;</span><span class="p">]},</span>
<span class="gp">... </span>    <span class="n">index</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="s2">&quot;1988-08-08&quot;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">PowerTrend</span><span class="p">(</span><span class="n">power</span><span class="o">=</span><span class="mf">2.</span><span class="p">,</span> <span class="n">frequency</span><span class="o">=</span><span class="s2">&quot;d&quot;</span><span class="p">,</span> <span class="n">origin_date</span><span class="o">=</span><span class="s2">&quot;1988-08-06&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<span class="go">            A  trend</span>
<span class="go">1988-08-08  a    4.0</span>
<span class="go">1988-08-09  b    9.0</span>
<span class="go">1988-08-10  c   16.0</span>
<span class="go">1988-08-11  d   25.0</span>
</pre></div>
</div>
<dl class="py method">
<dt id="skbonus.pandas.time.PowerTrend.fit">
<code class="sig-name descname"><span class="pre">fit</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">X</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">pandas.core.frame.DataFrame</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">None</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">skbonus.pandas.time._continuous.PowerTrend</span><a class="headerlink" href="#skbonus.pandas.time.PowerTrend.fit" title="Permalink to this definition">¶</a></dt>
<dd><p>Fit the model.</p>
<p>The point of origin and the frequency is constructed here, if not provided during initialization.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>X</strong> (<em>pd.DataFrame</em>) – Used for inferring the frequency and the origin date, if not provided during initialization.</p></li>
<li><p><strong>y</strong> (<em>Ignored</em>) – Not used, present here for API consistency by convention.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Fitted transformer.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#skbonus.pandas.time.PowerTrend" title="skbonus.pandas.time.PowerTrend">PowerTrend</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="skbonus.pandas.time.PowerTrend.transform">
<code class="sig-name descname"><span class="pre">transform</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">X</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">pandas.core.frame.DataFrame</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">pandas.core.frame.DataFrame</span><a class="headerlink" href="#skbonus.pandas.time.PowerTrend.transform" title="Permalink to this definition">¶</a></dt>
<dd><p>Add the trend column to the input dataframe.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>X</strong> (<em>pd.DataFrame</em>) – A pandas dataframe with a DatetimeIndex.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The input dataframe with an additional trend column.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pd.DataFrame</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="skbonus.pandas.time.SimpleTimeFeatures">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">skbonus.pandas.time.</span></code><code class="sig-name descname"><span class="pre">SimpleTimeFeatures</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">second</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bool</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">minute</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bool</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hour</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bool</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">day_of_week</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bool</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">day_of_month</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bool</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">day_of_year</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bool</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">week_of_month</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bool</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">week_of_year</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bool</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">month</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bool</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">year</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bool</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skbonus.pandas.time.SimpleTimeFeatures" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">sklearn.base.BaseEstimator</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">sklearn.base.TransformerMixin</span></code></p>
<p>Enrich pandas dataframes with new columns which are easy derivations from its DatetimeIndex, such as the day of week or the month.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>second</strong> (<em>bool</em><em>, </em><em>default=False</em>) – Whether to extract the day of week from the index and add it as a new column.</p></li>
<li><p><strong>minute</strong> (<em>bool</em><em>, </em><em>default=False</em>) – Whether to extract the day of week from the index and add it as a new column.</p></li>
<li><p><strong>hour</strong> (<em>bool</em><em>, </em><em>default=False</em>) – Whether to extract the day of week from the index and add it as a new column.</p></li>
<li><p><strong>day_of_week</strong> (<em>bool</em><em>, </em><em>default=False</em>) – Whether to extract the day of week from the index and add it as a new column.</p></li>
<li><p><strong>day_of_month</strong> (<em>bool</em><em>, </em><em>default=False</em>) – Whether to extract the day of month from the index and add it as a new column.</p></li>
<li><p><strong>day_of_year</strong> (<em>bool</em><em>, </em><em>default=False</em>) – Whether to extract the day of year from the index and add it as a new column.</p></li>
<li><p><strong>week_of_month</strong> (<em>bool</em><em>, </em><em>default=False</em>) – Whether to extract the week of month from the index and add it as a new column.</p></li>
<li><p><strong>week_of_year</strong> (<em>bool</em><em>, </em><em>default=False</em>) – Whether to extract the week of year from the index and add it as a new column.</p></li>
<li><p><strong>month</strong> (<em>bool</em><em>, </em><em>default=False</em>) – Whether to extract the month from the index and add it as a new column.</p></li>
<li><p><strong>year</strong> (<em>bool</em><em>, </em><em>default=False</em>) – Whether to extract the year from the index and add it as a new column.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
<span class="gp">... </span>    <span class="p">{</span><span class="s2">&quot;A&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">]},</span>
<span class="gp">... </span>    <span class="n">index</span><span class="o">=</span><span class="p">[</span>
<span class="gp">... </span>        <span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s2">&quot;1988-08-08&quot;</span><span class="p">),</span>
<span class="gp">... </span>        <span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s2">&quot;2000-01-01&quot;</span><span class="p">),</span>
<span class="gp">... </span>        <span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s2">&quot;1950-12-31&quot;</span><span class="p">),</span>
<span class="gp">... </span>    <span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">SimpleTimeFeatures</span><span class="p">(</span><span class="n">day_of_month</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">month</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">year</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<span class="go">            A  day_of_month  month  year</span>
<span class="go">1988-08-08  a             8      8  1988</span>
<span class="go">2000-01-01  b             1      1  2000</span>
<span class="go">1950-12-31  c            31     12  1950</span>
</pre></div>
</div>
<dl class="py method">
<dt id="skbonus.pandas.time.SimpleTimeFeatures.fit">
<code class="sig-name descname"><span class="pre">fit</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">X</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">pandas.core.frame.DataFrame</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">skbonus.pandas.time._simple.SimpleTimeFeatures</span><a class="headerlink" href="#skbonus.pandas.time.SimpleTimeFeatures.fit" title="Permalink to this definition">¶</a></dt>
<dd><p>Fit the estimator.</p>
<p>In this special case, nothing is done.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>X</strong> (<em>Ignored</em>) – Not used, present here for API consistency by convention.</p></li>
<li><p><strong>y</strong> (<em>Ignored</em>) – Not used, present here for API consistency by convention.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Fitted transformer.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#skbonus.pandas.time.SimpleTimeFeatures" title="skbonus.pandas.time.SimpleTimeFeatures">SimpleTimeFeatures</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="skbonus.pandas.time.SimpleTimeFeatures.transform">
<code class="sig-name descname"><span class="pre">transform</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">X</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">pandas.core.frame.DataFrame</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">pandas.core.frame.DataFrame</span><a class="headerlink" href="#skbonus.pandas.time.SimpleTimeFeatures.transform" title="Permalink to this definition">¶</a></dt>
<dd><p>Insert all chosen time features as new columns into the dataframe and output it.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>X</strong> (<em>pd.DataFrame</em>) – A pandas dataframe with a DatetimeIndex.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The input dataframe with additional time feature columns.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pd.DataFrame</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
</div>


           </div>

          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="skbonus.preprocessing.html" class="btn btn-neutral float-right" title="skbonus.preprocessing package" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="skbonus.pandas.html" class="btn btn-neutral float-left" title="skbonus.pandas package" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, Robert Kübler.

    </p>
  </div>



    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a

    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>

    provided by <a href="https://readthedocs.org">Read the Docs</a>.

</footer>
        </div>
      </div>

    </section>

  </div>


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>






</body>
</html>
